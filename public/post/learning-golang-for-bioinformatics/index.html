<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Learning golang for bioinformatics | Jake VanCampen</title>


<link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/site.webmanifest">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>


<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="/"><h1 class="title is-4">Jake VanCampen</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" aria-label="email" href='mailto:jake.vancampen7@gmail.com' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="github" href='https://github.com/jakevc' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/jakevancampen' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/jake_vancampen' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      
        <div class="nav-left"><a class="nav-item" href="/bio">
                <h2 class="title is-5">Bio</h2>
              </a><a class="nav-item" href="/cv">
                <h2 class="title is-5">CV</h2>
              </a></div>
      

      
    </nav>

  </div>
</section>

<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/golang">#golang</a>



  
  | <a class="subtitle is-6" href="/tags/bioinformatics">#bioinformatics</a>
  

      
    </div>
    <h2 class="subtitle is-6">September 4, 2018</h2>
    
    <div class="content">
      

<h1 id="what-is-go">What is Go?</h1>

<p><a href="https://golang.org/" target="_blank">Go</a>, or &ldquo;golang&rdquo; is a compiled language that was developped at Google in 2009. Golang is an open source language designed for simplicity, and portability within modern computational infrastructures. Golang is statically typed. In practice this means defining the types of variables, and explicitly keeping track of how those types are passed into and out of functions.</p>

<p>Hello World in go looks like this:</p>

<pre><code class="language-python">package main

import &quot;fmt&quot;

func main() {
  fmt.Println(&quot;Hello, World!&quot;)
}
</code></pre>

<p>I decided to learn golang because it looks beautiful, and I wanted to learn a lower level language than Python or R. I started learning golang with some online tutorials, and then realized I needed more relevant applications to my work. I am currently re-writing command-line tools for processing next-generation sequencing data that I had written in Python.</p>

<h1 id="development-environment">Development Environment</h1>

<p>When writing go, all code and binaries are stored in a structured location to provide a standard development workflow. When you download go, it is <a href="https://golang.org/doc/install" target="_blank">recommended</a> that you download the base packages into <code>/usr/local</code>. You will then have a <code>/usr/local/go</code> directory that is your go workspace. After adding go to your path:</p>

<p><code>export PATH=$PATH/usr/local/go/bin</code></p>

<p>your go code workspace can be a directory with any name and the following structure:</p>

<pre><code>→tree -L 1 golang
.
├── bin
├── pkg
└── src

3 directories, 0 files
</code></pre>

<p>My workspace is called golang, and contains a bin, pkg, and src directories. To configure this as your workspace, tell go this is where you want to work by adding the GOPATH and GOBIN environment variables in <code>~/.bash_profile</code> or <code>~/.bashrc</code>.</p>

<pre><code>export GOPATH=~/Documents/golang/
export GOBIN=$(go env GOPATH)bin
</code></pre>

<p>If you execute <code>go env</code> on the command-line you will see the value of all go environment variables and see what else can be configured.</p>

<p>To create a new program, make a directory inside <code>/src</code> with the name of the program you want to write. Use simple, descriptive names with only letters.</p>

<p>There are multiple ways to run go code:</p>

<p>If hello.go is here:</p>

<p><code>$GOPATH/src/hello/hello.go</code></p>

<ul>
<li><code>go run $GOPATH/src/hello/hello.go</code> runs th program</li>
<li><code>go build $GOPATH/src/hello/hello.go</code> will build the binary <code>$GOPATH/src/hello/hello</code></li>
<li><code>go install $GOPATH/src/hello/hello.go</code> compiles the binary into <code>$GOPATH/bin/hello</code></li>
</ul>

<p>For more infomation: <a href="https://golang.org/doc/code.html" target="_blank">&ldquo;How to write go code&rdquo;</a></p>

<h1 id="bioinformatics-tools">Bioinformatics Tools</h1>

<p>I have a some basic command line tools written in Python, specifically for investigating next-generation sequencing data: <a href="https://github.com/jakevc/nxgn-tools" target="_blank">nxgn-tools</a>. The golang version of these are being updated <a href="https://github.com/jakevc/nxgnTools" target="_blank">here</a> as I finish them. I will talk about my experience writing the first one: <code>fasta2line</code>.</p>

<p>Here is the finished command line tool <code>fasta2line</code> that &ldquo;unwraps&rdquo; multi-line fasta entries so that there are only two lins per entry: header, and sequence.</p>

<pre><code class="language-python">package main

/*
This program converts all multiline fasta entries in a file to
single line fasta entries.
*/

import (
	&quot;bufio&quot;
	&quot;bytes&quot;
	&quot;fmt&quot;
	&quot;os&quot;
	&quot;strings&quot;
)

func check(e error) {
	// check if err and panic
	if e != nil {
		panic(e)
	}
}

func combineSeqLine(path string) {
	// read file by line
	inFile, err := os.Open(path)
	check(err)
	defer inFile.Close()
	scanner := bufio.NewScanner(inFile)
	scanner.Split(bufio.ScanLines)

	var entry bytes.Buffer
	var first bool = true

	// scan and parse lines
	for scanner.Scan() {
		line := scanner.Text()

		// firstline case
		if first {
			entry.WriteString(line + &quot;\n&quot;)
			first = false
		}
		// write header
		if strings.HasPrefix(line, &quot;&gt;&quot;) {
			header := line
			entry.WriteString(&quot;\n&quot; + header + &quot;\n&quot;)
		}
		// write seq
		if !strings.HasPrefix(line, &quot;&gt;&quot;) {
			entry.WriteString(line)
		}
	}
	fmt.Println(entry.String())
}

func main() {
	if len(os.Args) &lt; 2 {
		fmt.Println(&quot;Provide path to multiline fasta file as command line argument&quot;)
		return
	}
	// read in the file
	combineSeqLine(os.Args[1])
}
</code></pre>

<p>There are a few things about this code that were new to me:</p>

<ul>
<li>lines written to a buffer</li>
<li>error handling</li>
<li>defer statement
<br />
<br /></li>
</ul>

<p>The buffio package allows you to scan the bytes of a file by line, then using the byes.buffer package we can write the processed information to the buffer and call the String method on it. If this program were writing to a file, we could gain efficiency by writing each entry at a time from the buffer to the file, instead of printing the whole buffer.</p>

<p>Error handling in go is gorgeous because of the built-in error type. There are numerous ways to <a href="https://blog.golang.org/error-handling-and-go" target="_blank">handle errors in go</a>, but the basic structure of checking the error is very common because many functions, <code>os.Open</code> in this case return a value, and an error.</p>

<pre><code>inFile, err := os.Open(path)
if err != nil {
  panic(err)
}
</code></pre>

<p>Defer simply &ldquo;defers the execution of a function until the surrounding function returns&rdquo;, this is useful for cleanup tasks like a file.Close(), and can be placed before the processing of the file so that the cleanup is more explicit.</p>

<h1 id="file-close">file.Close()</h1>

<p>I have been enjoying learning about golang, and will be likely writing more about it as I learn how to harness go&rsquo;s concurrency to make programs more powerful. I think golang could be very useful for bioinformatics programming, and I am excited to try out some applications.</p>

      
      <div class="related">
</div>
      
    </div>
    
  </div>
</section>

<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
    <script type="text/javascript">
      var disqus_shortname = 'jakevc';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p></p>
    
  </div>
</section>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script>
hljs.configure({languages: []});
hljs.initHighlightingOnLoad();
</script>

</body>
</html>

