<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author"
    content="Jake VanCampen">
<meta name="description"
    content="What is Go? Go, or &amp;ldquo;golang&amp;rdquo; is a compiled language that was developped at Google in 2009. Golang is an open source language designed for simplicity, and portability within modern computational infrastructures. Golang is statically typed. In practice this means defining the types of variables, and explicitly keeping track of how those types are passed into and out of functions.
Hello World in go looks like this:
package main import &amp;#34;fmt&amp;#34; func main() { fmt." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://jakevc.com/posts/2018/09/learning-golang-for-bioinformatics/" />


<title>
    
    Learning golang for bioinformatics :: Jake VanCampen  ‚Äî Hello Friend NG Theme
    
</title>



<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro" rel="stylesheet"
    type="text/css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">


<link rel="stylesheet" href="https://jakevc.com/scss/main.min.099699ab246bf26f50616f7c9f00c79d46110459d1bd727b2d07d6fc09ece082.css">



<link rel="apple-touch-icon" sizes="180x180" href="https://jakevc.com/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jakevc.com/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://jakevc.com/favicon-16x16.png">
<link rel="manifest" href="https://jakevc.com/site.webmanifest">
<link rel="mask-icon" href="https://jakevc.com/safari-pinned-tab.svg" color="#252627">
<link rel="shortcut icon" href="https://jakevc.com/favicon.ico">
<meta name="theme-color" content="#252627">
<meta itemprop="name" content="Learning golang for bioinformatics">
<meta itemprop="description" content="What is Go? Go, or &ldquo;golang&rdquo; is a compiled language that was developped at Google in 2009. Golang is an open source language designed for simplicity, and portability within modern computational infrastructures. Golang is statically typed. In practice this means defining the types of variables, and explicitly keeping track of how those types are passed into and out of functions.
Hello World in go looks like this:
package main import &#34;fmt&#34; func main() { fmt.">


<meta itemprop="datePublished" content="2018-09-04T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-09-04T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="814">



<meta itemprop="keywords" content="golang,bioinformatics," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jakevc.com"/>

<meta name="twitter:title" content="Learning golang for bioinformatics"/>
<meta name="twitter:description" content="What is Go? Go, or &ldquo;golang&rdquo; is a compiled language that was developped at Google in 2009. Golang is an open source language designed for simplicity, and portability within modern computational infrastructures. Golang is statically typed. In practice this means defining the types of variables, and explicitly keeping track of how those types are passed into and out of functions.
Hello World in go looks like this:
package main import &#34;fmt&#34; func main() { fmt."/>




<meta property="article:published_time" content="2018-09-04 00:00:00 &#43;0000 UTC" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://jakevc.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">üè†</span>
            <span class="logo__cursor"></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://jakevc.com/about/">About</a></li><li><a href="https://jakevc.com/cv">CV</a></li><li><a href="https://jakevc.com/posts/">Posts</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>4 minutes

            

            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://jakevc.com/posts/2018/09/learning-golang-for-bioinformatics/">Learning golang for bioinformatics</a></h2>

            

            <div class="post-content">
                

<h1 id="what-is-go">What is Go?</h1>

<p><a href="https://golang.org/" target="_blank">Go</a>, or &ldquo;golang&rdquo; is a compiled language that was developped at Google in 2009. Golang is an open source language designed for simplicity, and portability within modern computational infrastructures. Golang is statically typed. In practice this means defining the types of variables, and explicitly keeping track of how those types are passed into and out of functions.</p>

<p>Hello World in go looks like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&#34;fmt&#34;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s2">&#34;Hello, World!&#34;</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>I decided to learn golang because it looks beautiful, and I wanted to learn a lower level language than Python or R. I started learning golang with some online tutorials, and then realized I needed more relevant applications to my work. I am currently re-writing command-line tools for processing next-generation sequencing data that I had written in Python.</p>

<h1 id="development-environment">Development Environment</h1>

<p>When writing go, all code and binaries are stored in a structured location to provide a standard development workflow. When you download go, it is <a href="https://golang.org/doc/install" target="_blank">recommended</a> that you download the base packages into <code>/usr/local</code>. You will then have a <code>/usr/local/go</code> directory that is your go workspace. After adding go to your path:</p>

<p><code>export PATH=$PATH/usr/local/go/bin</code></p>

<p>your go code workspace can be a directory with any name and the following structure:</p>

<pre><code>‚Üítree -L 1 golang
.
‚îú‚îÄ‚îÄ bin
‚îú‚îÄ‚îÄ pkg
‚îî‚îÄ‚îÄ src

3 directories, 0 files
</code></pre>

<p>My workspace is called golang, and contains a bin, pkg, and src directories. To configure this as your workspace, tell go this is where you want to work by adding the GOPATH and GOBIN environment variables in <code>~/.bash_profile</code> or <code>~/.bashrc</code>.</p>

<pre><code>export GOPATH=~/Documents/golang/
export GOBIN=$(go env GOPATH)bin
</code></pre>

<p>If you execute <code>go env</code> on the command-line you will see the value of all go environment variables and see what else can be configured.</p>

<p>To create a new program, make a directory inside <code>/src</code> with the name of the program you want to write. Use simple, descriptive names with only letters.</p>

<p>There are multiple ways to run go code:</p>

<p>If hello.go is here:</p>

<p><code>$GOPATH/src/hello/hello.go</code></p>

<ul>
<li><code>go run $GOPATH/src/hello/hello.go</code> runs th program</li>
<li><code>go build $GOPATH/src/hello/hello.go</code> will build the binary <code>$GOPATH/src/hello/hello</code></li>
<li><code>go install $GOPATH/src/hello/hello.go</code> compiles the binary into <code>$GOPATH/bin/hello</code></li>
</ul>

<p>For more infomation: <a href="https://golang.org/doc/code.html" target="_blank">&ldquo;How to write go code&rdquo;</a></p>

<h1 id="bioinformatics-tools">Bioinformatics Tools</h1>

<p>I have a some basic command line tools written in Python, specifically for investigating next-generation sequencing data: <a href="https://github.com/jakevc/nxgn-tools" target="_blank">nxgn-tools</a>. The golang version of these are being updated <a href="https://github.com/jakevc/nxgnTools" target="_blank">here</a> as I finish them. I will talk about my experience writing the first one: <code>fasta2line</code>.</p>

<p>Here is the finished command line tool <code>fasta2line</code> that &ldquo;unwraps&rdquo; multi-line fasta entries so that there are only two lins per entry: header, and sequence.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">package</span> <span class="n">main</span>

<span class="o">/*</span>
<span class="n">This</span> <span class="n">program</span> <span class="n">converts</span> <span class="nb">all</span> <span class="n">multiline</span> <span class="n">fasta</span> <span class="n">entries</span> <span class="ow">in</span> <span class="n">a</span> <span class="nb">file</span> <span class="n">to</span>
<span class="n">single</span> <span class="n">line</span> <span class="n">fasta</span> <span class="n">entries</span><span class="o">.</span>
<span class="o">*/</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s2">&#34;bufio&#34;</span>
	<span class="s2">&#34;bytes&#34;</span>
	<span class="s2">&#34;fmt&#34;</span>
	<span class="s2">&#34;os&#34;</span>
	<span class="s2">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="n">func</span> <span class="n">check</span><span class="p">(</span><span class="n">e</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="o">//</span> <span class="n">check</span> <span class="k">if</span> <span class="n">err</span> <span class="ow">and</span> <span class="n">panic</span>
	<span class="k">if</span> <span class="n">e</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
		<span class="n">panic</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="n">func</span> <span class="n">combineSeqLine</span><span class="p">(</span><span class="n">path</span> <span class="n">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="o">//</span> <span class="n">read</span> <span class="nb">file</span> <span class="n">by</span> <span class="n">line</span>
	<span class="n">inFile</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
	<span class="n">check</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
	<span class="n">defer</span> <span class="n">inFile</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
	<span class="n">scanner</span> <span class="p">:</span><span class="o">=</span> <span class="n">bufio</span><span class="o">.</span><span class="n">NewScanner</span><span class="p">(</span><span class="n">inFile</span><span class="p">)</span>
	<span class="n">scanner</span><span class="o">.</span><span class="n">Split</span><span class="p">(</span><span class="n">bufio</span><span class="o">.</span><span class="n">ScanLines</span><span class="p">)</span>

	<span class="n">var</span> <span class="n">entry</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">Buffer</span>
	<span class="n">var</span> <span class="n">first</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">true</span>

	<span class="o">//</span> <span class="n">scan</span> <span class="ow">and</span> <span class="n">parse</span> <span class="n">lines</span>
	<span class="k">for</span> <span class="n">scanner</span><span class="o">.</span><span class="n">Scan</span><span class="p">()</span> <span class="p">{</span>
		<span class="n">line</span> <span class="p">:</span><span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>

		<span class="o">//</span> <span class="n">firstline</span> <span class="n">case</span>
		<span class="k">if</span> <span class="n">first</span> <span class="p">{</span>
			<span class="n">entry</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="n">line</span> <span class="o">+</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>
			<span class="n">first</span> <span class="o">=</span> <span class="n">false</span>
		<span class="p">}</span>
		<span class="o">//</span> <span class="n">write</span> <span class="n">header</span>
		<span class="k">if</span> <span class="n">strings</span><span class="o">.</span><span class="n">HasPrefix</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="s2">&#34;&gt;&#34;</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">header</span> <span class="p">:</span><span class="o">=</span> <span class="n">line</span>
			<span class="n">entry</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span> <span class="o">+</span> <span class="n">header</span> <span class="o">+</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="o">//</span> <span class="n">write</span> <span class="n">seq</span>
		<span class="k">if</span> <span class="err">!</span><span class="n">strings</span><span class="o">.</span><span class="n">HasPrefix</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="s2">&#34;&gt;&#34;</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">entry</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>
<span class="p">}</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">Args</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">{</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s2">&#34;Provide path to multiline fasta file as command line argument&#34;</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="o">//</span> <span class="n">read</span> <span class="ow">in</span> <span class="n">the</span> <span class="nb">file</span>
	<span class="n">combineSeqLine</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">Args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="p">}</span></code></pre></div>
<p>There are a few things about this code that were new to me:</p>

<ul>
<li>lines written to a buffer</li>
<li>error handling</li>
<li>defer statement
<br />
<br /></li>
</ul>

<p>The buffio package allows you to scan the bytes of a file by line, then using the byes.buffer package we can write the processed information to the buffer and call the String method on it. If this program were writing to a file, we could gain efficiency by writing each entry at a time from the buffer to the file, instead of printing the whole buffer.</p>

<p>Error handling in go is gorgeous because of the built-in error type. There are numerous ways to <a href="https://blog.golang.org/error-handling-and-go" target="_blank">handle errors in go</a>, but the basic structure of checking the error is very common because many functions, <code>os.Open</code> in this case return a value, and an error.</p>

<pre><code>inFile, err := os.Open(path)
if err != nil {
  panic(err)
}
</code></pre>

<p>Defer simply &ldquo;defers the execution of a function until the surrounding function returns&rdquo;, this is useful for cleanup tasks like a file.Close(), and can be placed before the processing of the file so that the cleanup is more explicit.</p>

<h1 id="file-close">file.Close()</h1>

<p>I have been enjoying learning about golang, and will be likely writing more about it as I learn how to harness go&rsquo;s concurrency to make programs more powerful. I think golang could be very useful for bioinformatics programming, and I am excited to try out some applications.</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://jakevc.com/tags/golang">golang</a></span><span class="tag"><a href="https://jakevc.com/tags/bioinformatics">bioinformatics</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>814 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2018-09-03 17:00 -0700</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h"></span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://jakevc.com/posts/2018/10/how-to-make-goslides/">
                                <span class="button__icon">‚Üê</span>
                                <span class="button__text">How to make goslides</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="https://jakevc.com/posts/2017/11/align-and-count-rna-seq-reads-with-star/">
                                <span class="button__text">Align and count RNA-seq reads with STAR</span>
                                <span class="button__icon">‚Üí</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2019</span>
            
                <span><a href="https://jakevc.com">Jake VanCampen</a></span>
            
            <span> <a href="https://jakevc.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">

        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
        </div>
    </div>
</footer>

            
        </div>

        





<script type="text/javascript" src="https://jakevc.com/js/bundle.4b80fbbfab88198dcef181b034822e60a3e68b1c128d1dc05392a32943a18ec2f866fbcd9ce31dcf84134397161647ad605ea5c25ecf12e5fcf9d28b47e64bb5.js" integrity="sha512-S4D7v6uIGY3O8YGwNIIuYKPmixwSjR3AU5KjKUOhjsL4ZvvNnOMdz4QTQ5cWFketYF6lwl7PEuX8&#43;dKLR&#43;ZLtQ=="></script>



    </body>
</html>
